<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Projet 2017</title>

    <!-- Bootstrap -->
    <!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" crossorigin="anonymous">

	<!-- Latest compiled and minified JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" crossorigin="anonymous"></script>
	
    <link href="css/bootstrap-Meteo.css" rel="stylesheet">
    <link href="css/weather-icons.css" rel="stylesheet">
    <link href="css/bootstrap-Spinner.css" rel="stylesheet">
    <link href="style.css" rel="stylesheet">

  </head>
  <body>
  	<div id="meteo">
  		<nav>
    	<div class="container">
		<div class="row">
			<div class="col-sm-3">
				<div id="card" class="weater">
					<div class="city-selected">
						<article>

							<div class="info">
								<div class="city"><span>Jour :</span> <font id="numJourCourrant"></font> / <font id="moment"></font></div>
								<div class="night" id="weather"></div>
								<div class="temp">22:07</div>

								<div class="wind">
									

									<span>ville: PERPIGNAN</span>
								</div>
							</div>

							<div class="icon">
								<img 
									id="logoDay1"
    								src="SVG/14.svg" 
    								alt="weather"
    								height="87px"
    								width="80px" 
    							/>
							</div>

						</article>
						
						<figure><img id="imageback" src="images/rainy.png" class="fontImage" /></figure>
					</div>

					<div class="days">
						<div class="row row-no-gutter">
							<div class="col-md-4">
								<div class="day">
									<h1>JOUR 2</h1>
									<h1>AM</h1>
									<img 
    								src="SVG/14_2.svg" 
    								alt="prev1"
    								height="87px"
    								width="80px" 
    							/>
								</div>
							</div>

							<div class="col-md-4">
								<div class="day">
									<h1>JOUR 2</h1>
									<h1>PM</h1>
									<img 
    								src="SVG/18_2.svg" 
    								alt="prev2"
    								height="87px"
    								width="80px" 
    							/>
								</div>
							</div>

							<div class="col-md-4">
								<div class="day">
									<h1>JOUR 3</h1>
									<h1>AM</h1>
									<img 
    								src="SVG/2_2.svg" 
    								alt="prev3"
    								height="87px"
    								width="80px" 
    							/>
								</div>
							</div>

						</div>
					</div>
				</div>
			</div>
			<div class="col-sm-9">
				<div id="tabs">
    				<div class="well">
        				<ul class="nav nav-tabs">
          					<li class="active"><a href="#Stats" data-toggle="tab">Statistiques</a></li>
          					<li><a href="#Cost" data-toggle="tab">Coûts</a></li>
          					<li><a href="#Map" data-toggle="tab" onclick="displayMap(20,20)">Carte</a></li>
          					<li><a href="#Actions" data-toggle="tab" onclick="getActions()">Actions</a></li>
          					<li><a href="#Player" data-toggle="tab" >Joueur en partie</a></li>
          					<li>Budget : <font id="money"></font></li>
        				</ul>

        				<div id="myTabContent" class="tab-content">
          					<div class="tab-pane active in" id="Stats">
            					<fieldset>
									<legend class="titre_tab">Toute les statistiques</legend>
								</fieldset>
          					</div>
          					<div class="tab-pane fade" id="Cost">
        						Cout matiere premiere et pub : 
          					</div>
          					<div class="tab-pane fade" id="Map">
            					Carte du jeu :
            					<div id="MapPlace">

									</div>
          					</div>
          					<div class="tab-pane fade" id="Actions">
            					<fieldset>
									<legend class="titre_tab">Actions a réaliser par jour</legend>
									<div class="col-sm-12" id="BuyMP">
									</div>
									<div class="col-sm-12 container">

    								<div class="well well-sm text-center">        
      
      <div class="" data-toggle="buttons">
        <label class="btn btn-lg btn-block btn-success text-success active">
            <input type="radio" name="options" id="option1" autocomplete="off" checked>
            <i class="fa fa-check-circle-o fa-3x animated fadeIn"></i>
            <br />
            Commande passée !
        </label>
        <label class="btn btn-lg btn-block btn-default text-default">
            <input type="radio" name="options" id="option2" autocomplete="off">
            <i class="fa fa-circle-o fa-3x"></i>
            <br />
            Envoyer
        </label>   
      </div>
    
    </div>
    
</div>
								</fieldset>
          					</div>
          					<div class="tab-pane fade" id="Player">
           						Liste des joueur en partie avec vous :
          					</div>
        				</div>
    				</div>
				</div>
			</div>
		</div>
		</div>
		</nav>
  	</div>


	<div id="testAff">
	</div>

<script src="js/bootstrap-spinnerJS.js"></script>
	<script type="text/javascript">
				
				document.addEventListener('DOMCOntentLoaded', getDayInfo());
				var nbDivX = 0;
				var nbDivY = 0;

				function displayMap(x,y){
						nbDivX = 0;
						nbDivY = 0;
						$('#MapPlace').empty();
						for(var i = 0; i < x; i++){
							for(var j = 0; j < y ; j++){
								$('#MapPlace').append('<div class="case" id="' + nbDivY + nbDivX + '"></div>');
								nbDivX +=1;
							}
							nbDivY +=1;
							nbDivX = 0;
							$('#MapPlace').append('<br/>');
						}

						for(var i = 0; i < 10 ; i++){
							var x = Math.floor(Math.random() * 20) + 1 ;
							var y = Math.floor(Math.random() * 20) + 1 
							$('#' + x + '' + y).append('<div class="perso"></div>');
						}
				}

				function getDayInfo(){
					$.ajax('http://ponderosaproject.herokuapp.com/dayinfo').done(function(data){

						var day = data['day'];
						var budget = data['budget'];
						var weather = data['weather'];
						var momentOfDay = data['moment'];

						$('#money').empty();
						$('#money').append('' + budget);
						$('#weather').empty();
						$('#weather').append('' + weather);
						$('#numJourCourrant').empty();
						$('#numJourCourrant').append('' + day);
						$('#moment').empty();
						$('#moment').append('' + momentOfDay);

						switch(weather){
							case 'CLOUDY':
								 document.getElementById("logoDay1").src= "SVG/14.svg";
								 document.getElementById("imageback").src = "images/cloudy.png";
								break;
							case 'RAINY':
								 document.getElementById("logoDay1").src= "SVG/18.svg";
								 document.getElementById("imageback").src = "images/rainy.png";
								break;
							case 'SUNNY':
								 document.getElementById("logoDay1").src= "SVG/8.svg";
								 document.getElementById("imageback").src = "images/sunny.png";
								break;
							case 'HEATWAVE':
								 document.getElementById("logoDay1").src= "SVG/2.svg";
								 document.getElementById("imageback").src = "images/heatwave.png";
								break;
							case 'THUNDERSTORM':
								 document.getElementById("logoDay1").src= "SVG/16.svg";
								 document.getElementById("imageback").src = "images/thunderstorm.png";
								break;
							default:
								break;
						}
					});
				}

				function getActions(){
					
					$.ajax('http://ponderosaproject.herokuapp.com/coucou').done(function(data){
						//value[]
						$('#BuyMP').empty();

						$("#BuyMP").append('<tr class="col-sm-12 titleList"><td class="col-sm-6 titleList_texte">Cocktails</td><td class="col-sm-6 titleList_texte">Nombre à produire</td></tr>');
						var classValue = 1;
						//$("#BuyMP").append('');
						//$('#BuyMP').load("html/html-spinner.html"); 

						for(var i in data){
							var madata = JSON.stringify(data[i]);
							var maDataGet = JSON.parse(madata);

							if(classValue == 0)
							{
								classValue = 1;
							}
							else{
								classValue = 0;
							}

							$("#BuyMP").append('<tr class="col-sm-12 list_' + classValue + '"><td class="col-sm-6"><div >' + maDataGet.nom_test + '</div></td><td class="col-sm-6"><div><div class="input-group number-spinner"><span class="input-group-btn"><button class="btn btn-default buttonMoins" data-dir="dwn"><span class="glyphicon glyphicon-minus"></span></button></span><input type="text" class="form-control text-center" value="0"><span class="input-group-btn"><button class="btn btn-default buttonPlus" data-dir="up"><span class="glyphicon glyphicon-plus"></span></button></span></div></div></td>');
						}
					});
				}


				
				function addMP(numMP){

				}

				function sendData(){
					$.ajax("http://ponderosaproject.herokuapp.com/posttest",{
						type: 'POST',
						contentType: 'application/json',
						data: JSON.stringify('datapost')
					});
				}



	</script>
  </body>
</html>